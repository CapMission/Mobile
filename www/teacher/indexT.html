<ion-view  title='<img class="title-image" src="parent/icon.png"> Cap Mission </img>' cache-view="false">
  <ion-nav-buttons side="right">
    <a class="button button-icon ion-ios-more rotate-90 fs-s" ng-app="capMission.teacher" ng-controller="TProposCtrl" ng-click="popover.show($event)"></a>
  </ion-nav-buttons>

  <ion-tabs class="tabs-icon-top tabs-color-active-positive" ng-class="{'tabs-item-hide': $root.hideTabs}">


    <ion-tab  hidden="true" >

    </ion-tab>


    <ion-tab title="quiz" icon-off="ion-ios-timer-outline" icon-on="ion-ios-timer" badge="badgequiz"
             badge-style="badge-assertive" ng-click="onTabSelected()">

    </ion-tab>


    <ion-tab title="Suivi" icon-off="ion-ios-pulse" icon-on="ion-ios-pulse-strong"  badge="badgeFollow"
             badge-style="badge-assertive" ng-click="onTabSelected()">

    </ion-tab>

    <!-- <ion-tab title="Messages" icon-off="ion-ios-email-outline" icon-on="ion-ios-email"
              badge="badgeMessages" badge-style="badge-assertive" ng-click="onTabSelected()">

     </ion-tab>-->
    <ion-tab title="Solde" href="#/teacher/ChoixSolde" icon-off="icon ion-ios-calculator-outline"
             icon-on="icon ion-ios-calculator"></ion-tab>

    <!--<ion-tab title="Contactez-nous" icon-off="ion-ios-chatboxes-outline" icon-on="ion-ios-chatboxes"
             badge="badgeMessages" badge-style="badge-assertive" ng-click="onTabSelected()">

    </ion-tab>-->

  </ion-tabs>
  <br>

  <ion-content>
    <br><br><br>
    <!--<div id="holder">-->
    <div>
      <div class="divEmploi"><i class="ion-calendar">&nbsp;Planning</i></div>
      <br>

      <div class="pagText">
        Semaine du <br>
        <a id="idLeft" class="button icon-left ion-chevron-left button-clear button-dark pagText"
           ng-click="showLoading();prevWeek()"><strong>{{currentWeekStart()}}</strong></a>
        <a id="idRight" class="button icon-right ion-chevron-right button-clear button-dark pagText"
           ng-click="showLoading();nextWeek()"><strong>{{currentWeekEnd()}}</strong></a>
      </div>
    </div>
    <ion-scroll direction="y" class="theroot">
    <div  class="card divCard item-text-wrap"
          ng-repeat="timetables in teacher.entity.timetables | orderBy:'start' | filter:week">

      <div ng-if="timetables.start > now" class="item item-divider divItem item-icon-right">
        <div><a href="#" ng-app="capMission.teacher" ng-controller="TEmailController"
                                               ng-click="modal.show();getT(timetables.id,timetables.name,timetables.start)"><i
          class="icon ion-compose iMod"></i></a></div>
        <div class="TextS">
          <nobr>
            {{timetables.start | date: 'EEE dd MMM'}} {{timetables.start | date: 'HH:mm'}}-
            {{timetables.end | date: 'HH:mm'}} <strong>{{timetables.name.trunc(10)}}</strong></nobr>
        </div>
      </div>
      <div ng-if="timetables.start < now" class="item item-divider divItemS item-icon-right">
        <div class="TextS">
          <nobr>
            {{timetables.start | date: 'EEE dd MMM'}} {{timetables.start | date: 'HH:mm'}}-
            {{timetables.end | date: 'HH:mm'}} <strong>{{timetables.name.trunc(10)}}</strong></nobr>
        </div>
      </div>
    </div>
    </ion-scroll>
    <!--</div>-->

    <script id="templates/modalT.html" type="text/ng-template">
      <div class="modal transparent modalSize">
        <div class="card">
          <i class="icon ion-ios-close close-modal" ng-click="modal.hide()"></i>

          <p class="headerModal item-divider padding"> Vous voulez modifier ou supprimer cette s√©ance? Envoyez-nous un
            message !</p>

          <form name="myForm" novalidate>
            <input ng-model="id" type="hidden">
            <input ng-model="period" type="hidden">
            <input ng-model="debut" type="hidden">
            <input ng-model="mail.to" type="hidden">
            <input ng-model="mail.from" type="hidden">
            <input ng-model="mail.subject" type="hidden">
            <label class="item item-input">
              <center><textarea class='autoExpand' rows='3' col="30" data-min-rows='3' name="msg" ng-model="mail.body"
                                placeholder="Votre message" required></textarea></center>
            </label>
            <br>
            <center>
              <button ng-disabled="myForm.$invalid" class="button button-small buttonEmail button-dark "
                      ng-click="sendT(mail,id,period,debut);modal.hide()">Envoyer
              </button>
            </center>
          </form>
          <div class="padding">
            <p ng-show="myForm.msg.$error.required">* Message est obligatoire</p>
          </div>

        </div>
      </div>
    </script>

  </ion-content>

</ion-view>

